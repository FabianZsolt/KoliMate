<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="KoliMate.Views.ProfilePage"
             Title="Profil"
             BackgroundColor="#FAFAFA">

    <ContentPage.ToolbarItems>
        <ToolbarItem Text="MegosztÃ¡s" 
                     IconImageSource="share.png"
                     Command="{Binding ShareProfileCommand}" 
                     Priority="0" 
                     Order="Primary"/>
    </ContentPage.ToolbarItems>

    <ScrollView>
        <VerticalStackLayout Padding="24" Spacing="20">

            <!-- ProfilkÃ©p -->
            <Frame Padding="0"
                   HeightRequest="180"
                   WidthRequest="180"
                   CornerRadius="90"
                   HasShadow="True"
                   HorizontalOptions="Center"
                   BackgroundColor="#E0E0E0">
                <Image Source="{Binding CurrentUser.PhotoPath}" 
                       Aspect="AspectFill" />
            </Frame>

            <!-- NÃ©v, Neptun kÃ³d Ã©s szÃ¼letÃ©si dÃ¡tum stÃ­lusosan -->
            <Frame CornerRadius="12" BackgroundColor="White" HasShadow="True" Padding="16" HorizontalOptions="Center">
                <VerticalStackLayout Spacing="6" HorizontalOptions="Center">

                    <Label Text="{Binding CurrentUser.Name}" 
                           FontAttributes="Bold" 
                           FontSize="22" 
                           HorizontalOptions="Center"/>

                    <HorizontalStackLayout Spacing="8" HorizontalOptions="Center">
                        <Label Text="Neptun kÃ³d:" FontAttributes="Bold"/>
                        <Label Text="{Binding CurrentUser.NeptunCode}"/>
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Spacing="8" HorizontalOptions="Center">
                        <Label Text="SzÃ¼letÃ©si dÃ¡tum:" FontAttributes="Bold"/>
                        <Label Text="{Binding BirthDate, StringFormat='{}{0:d}'}"/>
                    </HorizontalStackLayout>

                </VerticalStackLayout>
            </Frame>

            <!-- KÃ©p gombok -->
            <HorizontalStackLayout Spacing="16" HorizontalOptions="Center">
                <Button Text="KÃ©p kÃ©szÃ­tÃ©se" 
                        Command="{Binding TakePhotoCommand}" 
                        CornerRadius="12"
                        BackgroundColor="#007ACC"
                        TextColor="White"
                        Padding="12,8"/>
                <Button Text="KÃ©p kivÃ¡lasztÃ¡sa" 
                        Command="{Binding PickPhotoCommand}" 
                        CornerRadius="12"
                        BackgroundColor="#007ACC"
                        TextColor="White"
                        Padding="12,8"/>
            </HorizontalStackLayout>

            <!-- SzerkeszthetÅ‘ adatok -->
            <Frame CornerRadius="12" BackgroundColor="White" HasShadow="True" Padding="12">
                <VerticalStackLayout Spacing="14">
                    <Editor Text="{Binding CurrentUser.Description, Mode=TwoWay}" 
                            HeightRequest="100" 
                            Placeholder="BemutatkozÃ¡s" />

                    <Entry Text="{Binding CurrentUser.PhoneNumber, Mode=TwoWay}" 
                           Placeholder="TelefonszÃ¡m" 
                           Keyboard="Telephone" />
                    <Entry Text="{Binding CurrentUser.Email, Mode=TwoWay}" 
                           Placeholder="Email cÃ­m" 
                           Keyboard="Email" />
                    <Entry Text="{Binding CurrentUser.FacebookProfile, Mode=TwoWay}" 
                           Placeholder="Facebook profil URL" />

                    <Entry Text="{Binding CurrentUser.Password, Mode=TwoWay}" 
                           Placeholder="JelszÃ³" 
                           IsPassword="True"/>
                </VerticalStackLayout>
            </Frame>

            <!-- MÅ±veleti gombok -->
            <Button Text="ðŸ’¾ MentÃ©s" 
                    Command="{Binding SaveCommand}" 
                    CornerRadius="12"
                    BackgroundColor="#28A745" 
                    TextColor="White"
                    HeightRequest="50"/>

            <Button Text="ðŸ”“ KijelentkezÃ©s" 
                    Command="{Binding SignOutCommand}" 
                    CornerRadius="12"
                    BackgroundColor="#D9534F" 
                    TextColor="White"
                    HeightRequest="50"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
